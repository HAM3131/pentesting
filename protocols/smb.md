# SMB
SMB (Server Message Block) is a prevalent Windows protocol with many vectors for vertical and lateral movement. It usually runs on `port 445`.

SMB allows users and admins to share folders and make them accessible remotely by other users. These shares often have files in them that contain sensitive information.

## Enumeration
We can enumerate SMB with many Nmap scripts. For example, this command will interact with the SMB service to extract the reported operating system version.
```
$ nmap --script smb-os-discovery.nse -p445 [IP ADDRESS]
```

A tool that can enumerate and interact with SMB shares is `smbclient`. The `-L` flag specifies that we want to retrieve a list of available shares on the remote host, while `-N` suppresses the password prompt.
```
$ smbclient -N -L \\\\[IP ADDRESS]
```

If this reveals a share, we can try to connect to it:
```
$ smbclient \\\\[IP ADDRESS]\\[SHARE NAME]
            -- If we have credentials, we use the `-U [USERNAME]` flag
```

## Commands
Once connected to the server, you can navigate the file structure with commands.
<center>

**Command** | **Description**
--- | ---
`ls` | Lists the working directory's contents
`cd [DIRECTORY]` | Move to directory
`get [FILENAME]` | Download the file
</center>